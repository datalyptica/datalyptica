# dbt profiles configuration for Datalyptica
# Trino Version: 478 (verified Oct 29, 2025)
# Spark Version: 4.0.1 (verified Nov 7, 2025) - Recommended
# Spark Alternative: 3.5.7 for Scala 2.12 compatibility

datalyptica:
  target: trino
  outputs:
    trino:
      type: trino
      method: none
      host: "{{ env_var('TRINO_HOST', 'trino') }}"
      port: "{{ env_var('TRINO_PORT', 8080) | int }}"
      database: iceberg
      schema: analytics
      threads: 4
      http_scheme: http
      session_properties:
        query_max_run_time: 5m
        exchange_compression: True

    spark:
      type: spark
      method: thrift
      host: "{{ env_var('SPARK_HOST', 'spark-master') }}"
      port: "{{ env_var('SPARK_PORT', 10000) | int }}"
      schema: analytics
      threads: 4
      connect_retries: 3
      connect_timeout: 10
