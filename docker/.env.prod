# ShuDL Production Environment Configuration
# This file contains production-ready settings with security considerations

# =============================================================================
# Production Overrides
# =============================================================================
COMPOSE_PROJECT_NAME=shudl-prod

# Secure credentials (change these!)
POSTGRES_PASSWORD=CHANGE_ME_SECURE_POSTGRES_PASSWORD
MINIO_ROOT_PASSWORD=CHANGE_ME_SECURE_MINIO_PASSWORD
S3_SECRET_KEY=CHANGE_ME_SECURE_S3_SECRET

# Production resource allocation
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=8MB
POSTGRES_MAINTENANCE_WORK_MEM=128MB

TRINO_QUERY_MAX_MEMORY=4GB
TRINO_MEMORY_HEAP_HEADROOM=1GB

SPARK_DRIVER_MEMORY=4g
SPARK_EXECUTOR_MEMORY=4g
SPARK_EXECUTOR_CORES=4
SPARK_EXECUTOR_INSTANCES=4

# Production health check settings
HEALTHCHECK_INTERVAL=60s
HEALTHCHECK_TIMEOUT=30s
HEALTHCHECK_RETRIES=5
HEALTHCHECK_START_PERIOD=120s

# Security settings
NESSIE_CORS_ORIGINS=https://your-domain.com
NESSIE_CORS_METHODS=GET,POST,PUT,DELETE

# Monitoring
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=30d
GRAFANA_VERSION=10.2.2
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_SECURE_GRAFANA_PASSWORD
GRAFANA_ALLOW_SIGN_UP=false

# Logging
LOKI_VERSION=2.9.3
LOKI_PORT=3100
# Grafana Alloy (Promtail successor)
ALLOY_VERSION=v1.0.0
ALLOY_HTTP_PORT=12345

# Alertmanager Configuration
ALERTMANAGER_VERSION=v0.27.0
ALERTMANAGER_PORT=9095

# Alert Notification Settings (configure for production)
ALERT_EMAIL_TO=ops@shugur.com
ALERT_EMAIL_FROM=alertmanager@shugur.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SLACK_WEBHOOK_URL=
DB_TEAM_EMAIL=db-team@shugur.com
STORAGE_TEAM_EMAIL=storage-team@shugur.com
QUERY_TEAM_EMAIL=query-team@shugur.com

# SSL/TLS Configuration (Production)
POSTGRES_SSL_MODE=require  # Require SSL connections in production
ENABLE_MINIO_TLS=true      # Enable MinIO TLS in production
ENABLE_NESSIE_TLS=true     # Enable Nessie HTTPS in production
ENABLE_TRINO_TLS=true      # Enable Trino HTTPS in production
