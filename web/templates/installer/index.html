<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/static/css/installer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app" class="installer-app">
        <!-- Header -->
        <header class="installer-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-database"></i>
                        <h1>ShuDL Installer</h1>
                    </div>
                    <div class="version">{{.Version}}</div>
                </div>
                <p class="subtitle">{{.Description}}</p>
            </div>
        </header>

        <!-- Progress Indicator -->
        <div class="progress-container">
            <div class="container">
                <div class="progress-steps">
                    <div class="step active" data-step="1">
                        <div class="step-icon"><i class="fas fa-home"></i></div>
                        <div class="step-label">Welcome</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-icon"><i class="fas fa-cogs"></i></div>
                        <div class="step-label">Configuration</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-icon"><i class="fas fa-eye"></i></div>
                        <div class="step-label">Preview</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-icon"><i class="fas fa-rocket"></i></div>
                        <div class="step-label">Deploy</div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="step-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="step-label">Monitor</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                
                <!-- Step 1: Welcome -->
                <div id="step-1" class="step-content active">
                    <div class="welcome-section">
                        <div class="welcome-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <h2>Welcome to ShuDL Data Lakehouse</h2>
                        <p class="welcome-description">
                            Deploy a complete data lakehouse stack with intelligent configuration. 
                            ShuDL provides PostgreSQL, MinIO, Nessie, Trino, and Spark in a unified platform.
                        </p>
                        
                        <!-- System Check -->
                        <div class="system-check">
                            <h3><i class="fas fa-check-circle"></i> System Requirements</h3>
                            <div id="system-status" class="status-grid">
                                <div class="status-item" id="docker-status">
                                    <div class="status-icon loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div class="status-text">
                                        <div class="status-title">Docker</div>
                                        <div class="status-subtitle">Checking...</div>
                                    </div>
                                </div>
                                <div class="status-item" id="compose-status">
                                    <div class="status-icon loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div class="status-text">
                                        <div class="status-title">Docker Compose</div>
                                        <div class="status-subtitle">Checking...</div>
                                    </div>
                                </div>
                                <div class="status-item" id="memory-status">
                                    <div class="status-icon loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div class="status-text">
                                        <div class="status-title">Memory</div>
                                        <div class="status-subtitle">Checking...</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="welcome-actions">
                            <button id="start-installation" class="btn btn-primary btn-large" disabled>
                                <i class="fas fa-play"></i>
                                Start Installation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Configuration -->
                <div id="step-2" class="step-content">
                    <div class="config-section">
                        <h2>Configuration</h2>
                        <p>Configure your ShuDL deployment with intelligent defaults and dependency management.</p>
                        
                        <!-- Configuration Categories -->
                        <div class="config-tabs">
                            <div class="tab-nav" id="config-tab-nav">
                                <!-- Dynamically populated -->
                            </div>
                            <div class="tab-content" id="config-tab-content">
                                <!-- Dynamically populated -->
                            </div>
                        </div>

                        <!-- Shared Parameters Summary -->
                        <div class="shared-params-summary" id="shared-params">
                            <h3><i class="fas fa-link"></i> Shared Parameters</h3>
                            <div class="shared-params-list">
                                <!-- Dynamically populated -->
                            </div>
                        </div>

                        <div class="config-actions">
                            <button id="validate-config" class="btn btn-secondary">
                                <i class="fas fa-check"></i>
                                Validate Configuration
                            </button>
                            <button id="next-to-preview" class="btn btn-primary" disabled>
                                <i class="fas fa-arrow-right"></i>
                                Next: Preview
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Preview -->
                <div id="step-3" class="step-content">
                    <div class="preview-section">
                        <h2>Configuration Preview</h2>
                        <p>Review your configuration before deployment.</p>
                        
                        <div class="preview-tabs">
                            <div class="tab-nav">
                                <div class="tab-button active" data-tab="services">Services</div>
                                <div class="tab-button" data-tab="compose">Docker Compose</div>
                                <div class="tab-button" data-tab="environment">Environment</div>
                            </div>
                            
                            <div class="tab-content">
                                <div id="preview-services" class="tab-pane active">
                                    <div class="services-preview" id="services-preview">
                                        <!-- Dynamically populated -->
                                    </div>
                                </div>
                                <div id="preview-compose" class="tab-pane">
                                    <pre id="compose-preview"><code>Loading...</code></pre>
                                </div>
                                <div id="preview-environment" class="tab-pane">
                                    <pre id="env-preview"><code>Loading...</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="preview-actions">
                            <button id="back-to-config" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i>
                                Back to Configuration
                            </button>
                            <button id="start-deployment" class="btn btn-primary">
                                <i class="fas fa-rocket"></i>
                                Start Deployment
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Deployment -->
                <div id="step-4" class="step-content">
                    <div class="deployment-section">
                        <h2>Deployment in Progress</h2>
                        <p>Deploying your ShuDL data lakehouse stack...</p>
                        
                        <div class="deployment-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="deployment-progress-fill"></div>
                            </div>
                            <div class="progress-text">
                                <span id="deployment-status">Starting deployment...</span>
                                <span id="deployment-percentage">0%</span>
                            </div>
                        </div>

                        <div class="services-status" id="services-status">
                            <!-- Dynamically populated service status -->
                        </div>

                        <div class="deployment-logs">
                            <h3><i class="fas fa-terminal"></i> Deployment Logs</h3>
                            <div class="logs-container" id="deployment-logs">
                                <!-- Live deployment logs -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Monitor -->
                <div id="step-5" class="step-content">
                    <div class="monitor-section">
                        <h2>ShuDL Dashboard</h2>
                        <p>Monitor your data lakehouse stack status and performance.</p>
                        
                        <div class="dashboard-grid">
                            <div class="dashboard-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-heartbeat"></i> Service Health</h3>
                                </div>
                                <div class="card-content" id="health-status">
                                    <!-- Service health status -->
                                </div>
                            </div>

                            <div class="dashboard-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-chart-bar"></i> Resource Usage</h3>
                                </div>
                                <div class="card-content" id="resource-usage">
                                    <!-- Resource usage charts -->
                                </div>
                            </div>

                            <div class="dashboard-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-cogs"></i> Quick Actions</h3>
                                </div>
                                <div class="card-content">
                                    <div class="action-buttons">
                                        <button class="btn btn-secondary" id="restart-services">
                                            <i class="fas fa-redo"></i>
                                            Restart Services
                                        </button>
                                        <button class="btn btn-warning" id="stop-services">
                                            <i class="fas fa-stop"></i>
                                            Stop Services
                                        </button>
                                        <button class="btn btn-info" id="view-logs">
                                            <i class="fas fa-file-alt"></i>
                                            View Logs
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-link"></i> Service URLs</h3>
                                </div>
                                <div class="card-content" id="service-urls">
                                    <!-- Service access URLs -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <!-- Notifications -->
        <div id="notifications" class="notifications-container">
            <!-- Dynamic notifications -->
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <div class="loading-text">Processing...</div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/installer.js"></script>
</body>
</html> 