# ============================================================================
# ShuDL Platform Environment Configuration Template
# ============================================================================
# Instructions: Copy this file to .env and update the values
# cp .env.template .env
# ============================================================================

# Project Configuration
COMPOSE_PROJECT_NAME=shudl
SHUDL_VERSION=v1.0.0
TIMEZONE=UTC

# Health Check Configuration
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=60s

# MinIO Configuration
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_BUCKET_NAME=lakehouse
MINIO_REGION=us-east-1
MINIO_ADDRESS=:9000
MINIO_CONSOLE_ADDRESS=:9001
MINIO_VOLUMES=/data
MINIO_LOG_LEVEL=INFO
MINIO_LOG_FILE=/dev/stdout
MINIO_CACHE_DRIVES=
MINIO_CACHE_EXPIRY=90
MINIO_CACHE_QUOTA=80
MINIO_CACHE_EXCLUDE=
MINIO_COMPRESS=on
MINIO_COMPRESS_MIME_TYPES=text/*,application/json,application/xml
MINIO_BROWSER=on

# S3 Configuration
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=admin
S3_SECRET_KEY=minioadmin123
S3_REGION=us-east-1
S3_PATH_STYLE_ACCESS=true

# PostgreSQL Configuration
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123
SHUDL_DB=shudl
SHUDL_USER=shudl_user
SHUDL_PASSWORD=shudl123
NESSIE_DB=nessie

# PostgreSQL Performance
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=16MB
POSTGRES_MAINTENANCE_WORK_MEM=128MB
POSTGRES_WAL_LEVEL=replica
POSTGRES_MAX_WAL_SIZE=2GB
POSTGRES_MIN_WAL_SIZE=80MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_SUPERUSER_RESERVED_CONNECTIONS=3
POSTGRES_LISTEN_ADDRESSES=*

# PostgreSQL Authentication
POSTGRES_AUTH_LOCAL=trust
POSTGRES_AUTH_HOST_IPV4=md5
POSTGRES_AUTH_HOST_IPV6=md5
POSTGRES_AUTH_REPLICATION_LOCAL=trust
POSTGRES_AUTH_REPLICATION_HOST=md5
POSTGRES_AUTH_DOCKER_NETWORKS=172.20.0.0/16,172.21.0.0/16,172.22.0.0/16,172.23.0.0/16
POSTGRES_ALLOWED_NETWORKS=172.20.0.0/16,172.21.0.0/16,172.22.0.0/16,172.23.0.0/16
POSTGRES_SSL_MODE=prefer

# Nessie Configuration
NESSIE_PORT=19120
NESSIE_HOST=0.0.0.0
NESSIE_VERSION_STORE_TYPE=JDBC2
NESSIE_URI=http://nessie:19120/api/v2
NESSIE_CORS_ENABLED=true
NESSIE_CORS_ORIGINS=*
NESSIE_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,HEAD
NESSIE_CORS_HEADERS=*
NESSIE_CORS_EXPOSED_HEADERS=*
NESSIE_CORS_MAX_AGE=3600
NESSIE_DB_INITIAL_SIZE=5
NESSIE_DB_MIN_SIZE=5
NESSIE_DB_MAX_SIZE=20
NESSIE_DEFAULT_WAREHOUSE=lakehouse
NESSIE_WAREHOUSE_LOCATION=s3://lakehouse/warehouse
WAREHOUSE_LOCATION=s3://lakehouse/warehouse
NESSIE_MICROMETER_ENABLED=true
NESSIE_MICROMETER_EXPORT_PROMETHEUS_ENABLED=true
NESSIE_HEALTH_ROOT_PATH=/q/health
NESSIE_SWAGGER_UI_ALWAYS_INCLUDE=true
NESSIE_SWAGGER_UI_PATH=/q/swagger-ui
NESSIE_SERVER_AUTHENTICATION_ENABLED=false

# Streaming Layer
ZOOKEEPER_PORT=2181
KAFKA_PORT=9092
SCHEMA_REGISTRY_PORT=8085
KAFKA_UI_VERSION=v0.7.2
KAFKA_UI_PORT=8090

# Spark Configuration
SPARK_UI_PORT=4040
SPARK_MASTER_PORT=7077
SPARK_MASTER_URL=spark://spark-master:7077
SPARK_DRIVER_MEMORY=2g
SPARK_DRIVER_MAX_RESULT_SIZE=2g
SPARK_EXECUTOR_MEMORY=2g
SPARK_EXECUTOR_CORES=2
SPARK_EXECUTOR_INSTANCES=2
SPARK_DYNAMIC_ALLOCATION_ENABLED=false
SPARK_SERIALIZER=org.apache.spark.serializer.KryoSerializer
SPARK_WORKER_MEMORY=4g
SPARK_WORKER_CORES=4
SPARK_ICEBERG_CATALOG_NAME=iceberg
SPARK_ICEBERG_REF=main
SPARK_ICEBERG_URI=http://nessie:19120/api/v2
SPARK_ICEBERG_WAREHOUSE=s3://lakehouse/warehouse
SPARK_ICEBERG_IO_IMPL=org.apache.iceberg.aws.s3.S3FileIO

# Flink Configuration
FLINK_JOBMANAGER_PORT=8081
FLINK_TASK_SLOTS=4

# Trino Configuration
TRINO_PORT=8080
TRINO_COORDINATOR=true
TRINO_INCLUDE_COORDINATOR=true
TRINO_DISCOVERY_URI=http://trino:8080
TRINO_QUERY_MAX_MEMORY=4GB
TRINO_MEMORY_HEAP_HEADROOM=2GB
TRINO_NODE_ENVIRONMENT=production
TRINO_NODE_DATA_DIR=/data/trino
TRINO_NODE_ID=trino-coordinator-1
TRINO_JVM_XMX=8G
TRINO_JVM_GC=G1GC
TRINO_JVM_G1_HEAP_REGION_SIZE=32M
TRINO_JVM_EXIT_ON_OOM=true
TRINO_JVM_USE_GC_OVERHEAD_LIMIT=true
TRINO_JVM_NIO_MAX_CACHED_BUFFER_SIZE=262144
TRINO_JVM_ALLOW_ATTACH_SELF=true
TRINO_LOG_LEVEL_ROOT=INFO
TRINO_LOG_LEVEL_SERVER=INFO
TRINO_LOG_LEVEL_EXECUTION=INFO
TRINO_LOG_LEVEL_METADATA=INFO
TRINO_LOG_LEVEL_SECURITY=INFO
TRINO_LOG_LEVEL_SPI=INFO
TRINO_LOG_LEVEL_SQL=INFO
TRINO_LOG_LEVEL_TRANSACTION=INFO
TRINO_LOG_LEVEL_TYPE=INFO
TRINO_LOG_LEVEL_UTIL=INFO
TRINO_LOG_LEVEL_HTTP_REQUEST=INFO
TRINO_CATALOG_ICEBERG_CATALOG_TYPE=nessie
TRINO_CATALOG_ICEBERG_NESSIE_CATALOG_URI=http://nessie:19120/api/v2
TRINO_CATALOG_ICEBERG_NESSIE_CATALOG_REF=main
TRINO_CATALOG_ICEBERG_NESSIE_CATALOG_DEFAULT_WAREHOUSE_DIR=s3://lakehouse/warehouse
TRINO_CATALOG_ICEBERG_FILE_FORMAT=PARQUET
TRINO_CATALOG_ICEBERG_COMPRESSION_CODEC=SNAPPY

# ClickHouse Configuration
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9009
CLICKHOUSE_DB=default
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=

# dbt & Kafka Connect
DBT_DOCS_PORT=8580
KAFKA_CONNECT_PORT=8083

# Observability Layer
PROMETHEUS_PORT=9090
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_RETENTION_TIME=15d
GRAFANA_PORT=3000
GRAFANA_VERSION=10.2.2
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ALLOW_SIGN_UP=false
GRAFANA_ROOT_URL=http://localhost:3000
GRAFANA_INSTALL_PLUGINS=
LOKI_PORT=3100
LOKI_VERSION=2.9.3
ALLOY_HTTP_PORT=12345
ALLOY_VERSION=v1.0.0
ALERTMANAGER_PORT=9095
ALERTMANAGER_VERSION=v0.27.0

# Keycloak Configuration
KEYCLOAK_PORT=8180
KEYCLOAK_HTTPS_PORT=8543
KEYCLOAK_VERSION=23.0
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_DB=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=keycloak123
