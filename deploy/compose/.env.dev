# ShuDL Development Environment Override
# Copy this file to .env.dev, .env.prod, etc. and modify as needed

# =============================================================================
# Development Overrides
# =============================================================================
COMPOSE_PROJECT_NAME=shudl-dev

# Use development credentials (insecure)
POSTGRES_PASSWORD=devpass123
MINIO_ROOT_PASSWORD=devpass123
S3_SECRET_KEY=devpass123

# Lower resource usage for development
POSTGRES_SHARED_BUFFERS=64MB
POSTGRES_EFFECTIVE_CACHE_SIZE=256MB
TRINO_QUERY_MAX_MEMORY=1GB
TRINO_MEMORY_HEAP_HEADROOM=256MB
SPARK_DRIVER_MEMORY=1g
SPARK_EXECUTOR_MEMORY=1g
SPARK_EXECUTOR_INSTANCES=1

# Faster health checks for development
HEALTHCHECK_INTERVAL=10s
HEALTHCHECK_START_PERIOD=15s

# Monitoring
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=7d
GRAFANA_VERSION=10.2.2
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ALLOW_SIGN_UP=false

# Logging
LOKI_VERSION=2.9.3
LOKI_PORT=3100
# Grafana Alloy (Promtail successor)
ALLOY_VERSION=v1.0.0
ALLOY_HTTP_PORT=12345

# Alertmanager Configuration
ALERTMANAGER_VERSION=v0.27.0
ALERTMANAGER_PORT=9095

# Alert Notification Settings (configure for your environment)
ALERT_EMAIL_TO=ops@datalyptica.com
ALERT_EMAIL_FROM=alertmanager@datalyptica.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SLACK_WEBHOOK_URL=
DB_TEAM_EMAIL=db-team@datalyptica.com
STORAGE_TEAM_EMAIL=storage-team@datalyptica.com
QUERY_TEAM_EMAIL=query-team@datalyptica.com

# SSL/TLS Configuration
POSTGRES_SSL_MODE=prefer  # Options: disable, allow, prefer, require, verify-ca, verify-full
ENABLE_MINIO_TLS=false     # Set to true to enable MinIO TLS (requires cert setup)
ENABLE_NESSIE_TLS=false    # Set to true to enable Nessie HTTPS
ENABLE_TRINO_TLS=false     # Set to true to enable Trino HTTPS

# Keycloak SSO Configuration
KEYCLOAK_VERSION=23.0
KEYCLOAK_PORT=8180         # Changed from 8080 to avoid Trino conflict
KEYCLOAK_HTTPS_PORT=8543
KEYCLOAK_DB=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=keycloak_dev_pass
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_HOSTNAME=localhost
