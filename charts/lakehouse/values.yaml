# Global configuration
global:
  imageRepo: "ghcr.io/Shugur-Network/shudl"
  clusterMode: "stand-alone"  # or "high-availability"

# MinIO Object Store
minio:
  enabled: true
  mode: standalone
  image:
    repository: minio
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  auth:
    rootUser: admin
    rootPassword: password123
  persistence:
    enabled: true
    size: 10Gi
  service:
    type: ClusterIP
    port: 9000
  console:
    enabled: true
    port: 9001
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

# PostgreSQL with Patroni for HA
postgresql:
  enabled: true
  image:
    # Using base-postgresql directly (no longer uses services/postgresql)
    repository: base-postgresql
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  auth:
    postgresPassword: password123
    database: lakehouse
    username: lakehouse
    password: password123
  # ShuDL-specific database configuration
  shudl:
    database: shudl
    username: shudl
    password: password123
  nessie:
    database: nessie
  primary:
    persistence:
      enabled: true
      size: 8Gi
  service:
    type: ClusterIP
    port: 5432
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

# Patroni Configuration
patroni:
  enabled: true
  image:
    repository: patroni
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  # etcd:
  #   enabled: true
  #   image:
  #     repository: etcd
  #     tag: "dev-latest"
  #     pullPolicy: IfNotPresent
  #   auth:
  #     enabled: false
  #   persistence:
  #     enabled: true
  #     size: 1Gi
  #   resources:
  #     limits:
  #       cpu: 200m
  #       memory: 256Mi
  #     requests:
  #       cpu: 100m
  #       memory: 128Mi
  kubernetes:
    enabled: true
    namespace: ""
    labels: {}
    scope_label: "cluster-name"
    role_label: "role"
    use_endpoints: true
  zookeeper:
    enabled: false
    image:
      repository: bitnami/zookeeper
      tag: "3.8.3"
    auth:
      enabled: false
    persistence:
      enabled: true
      size: 1Gi
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi

# Nessie Catalog
nessie:
  enabled: true
  image:
    repository: nessie
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 19120
  persistence:
    enabled: true
    size: 5Gi
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

# Trino SQL Engine
trino:
  enabled: true
  image:
    repository: trino
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  coordinator:
    enabled: true
    service:
      type: ClusterIP
      port: 8080
    resources:
      limits:
        cpu: 1
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi
  workers:
    enabled: true
    replicas: 1
    resources:
      limits:
        cpu: 1
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi

# Spark for batch/ML
spark:
  enabled: true
  image:
    repository: spark
    tag: "dev-latest"
    pullPolicy: IfNotPresent
  master:
    enabled: true
    service:
      type: ClusterIP
      port: 7077
    webui:
      port: 8080
    resources:
      limits:
        cpu: 500m
        memory: 1Gi
      requests:
        cpu: 250m
        memory: 512Mi
  worker:
    enabled: true
    replicas: 1
    resources:
      limits:
        cpu: 1
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi